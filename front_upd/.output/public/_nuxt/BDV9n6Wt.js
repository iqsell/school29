import{N as v}from"./bznZXvz6.js";import{u as b}from"./Dhlyc-1U.js";import{f as w,u as x,r as l,g as y,l as k,c,a as _,F as N,h as C,j as o,m as B,t as j,o as r,i as D,_ as E}from"./DokWdYS9.js";const F={class:"news"},I={class:"more_news"},L=["disabled"],P=w({__name:"allnews",async setup(U){let u,d;b({title:"Новости | 29",meta:[{name:"allnews",content:"Все новости школы номер 29"}]});const p=x().public.apiUrl,i=l([]),a=l(null),n=l(!1),m=async t=>{try{n.value=!0;const e=await $fetch(t||`${p}/news/`);i.value=[...i.value,...e.results],a.value=e.next}catch(e){console.error("Ошибка загрузки:",e)}finally{n.value=!1}};[u,d]=y(()=>m()),await u,d();const f=()=>{a.value&&m(a.value)},g=k(()=>!!a.value),h=t=>{if(!t)return"";const e=t.match(/[.!?…]/);return e?t.substring(0,e.index+1):t.length>100?t.substring(0,100)+"...":t};return(t,e)=>(r(),c("div",F,[e[0]||(e[0]=_("h2",null,"Новости",-1)),(r(!0),c(N,null,C(o(i),s=>(r(),D(v,{key:s.id,image:s.image||"/placeholder-news.jpg",title:s.title,discription:h(s.content),date:s.created_at,id:s.id},null,8,["image","title","discription","date","id"]))),128)),_("div",I,[o(g)?(r(),c("button",{key:0,class:"more_news__btn",onClick:f,disabled:o(n)},j(o(n)?"Загрузка...":"Загрузить ещё"),9,L)):B("",!0)])]))}}),M=E(P,[["__scopeId","data-v-52c1bb23"]]);export{M as default};
