import{f as N,u as O,r as c,c as i,a as r,O as v,m as p,P as R,Q as f,R as m,F as g,h as _,j as S,o as d,t as b,_ as $}from"./DokWdYS9.js";import{u as D}from"./Dhlyc-1U.js";const E={class:"form-container"},I={class:"form-group"},T={key:0,class:"error"},j={class:"form-group class-selectors"},q={class:"select-row"},B=["value"],L=["value"],z={key:0,class:"error"},A=N({__name:"order_a_certificate",setup(M){D({title:"Заказать справку | 29",meta:[{name:"order a certificate",content:"Заказ справок школы номер 29"}]});const y=O().public.apiUrl,a=c(""),o=c(""),l=c(""),n=c(!1),u=c(!1),w=s=>/^[А-Яа-яЁё\s\-]+$/.test(s),x=s=>s.trim().split(/\s+/).filter(t=>t.length>0).length===3&&w(s),h=s=>{const t=s.target.value;if(/[0-9A-Za-z]/.test(t)){n.value=!0;return}a.value=t,n.value=!1},k=()=>{let s=!0;return x(a.value)||(n.value=!0,s=!1),!o.value||!l.value?(u.value=!0,s=!1):u.value=!1,s},C=async s=>{if(s.preventDefault(),!k())return;const e={fio:a.value.trim(),student_class:`${o.value}${l.value}`};try{const t=await fetch(`${y}/references/order/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Ошибка ${t.status}`);const V=await t.json();console.log("Ответ от сервера:",V),a.value="",o.value="",l.value="",n.value=!1,u.value=!1,alert("Форма успешно отправлена!")}catch(t){console.error("Ошибка при отправке формы:",t),alert("Ошибка при отправке. Попробуйте снова.")}},F=Array.from({length:11},(s,e)=>e+1),U=["а","б","в","г","д","е","ж","з","и","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","э","ю","я"];return(s,e)=>(d(),i("div",E,[e[8]||(e[8]=r("h1",null,"Заказ справки об обучении ребенка",-1)),r("form",{onSubmit:C},[r("div",I,[e[3]||(e[3]=r("h3",null,"ФИО",-1)),v(r("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),onInput:h,placeholder:"Введите ФИО",title:"Только русские буквы, пробелы и дефисы",required:"",class:f({"error-border":n.value})},null,34),[[R,a.value]]),n.value?(d(),i("div",T," Введите Фамилию, Имя и Отчество на русском языке (Пример: Иванов Иван Иванович) ")):p("",!0)]),r("div",j,[e[6]||(e[6]=r("h3",null,"Класс",-1)),r("div",q,[v(r("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value=t),class:f(["class-select",{"error-border":u.value&&!o.value}]),required:""},[e[4]||(e[4]=r("option",{value:"",disabled:"",selected:""},"Выберите цифру",-1)),(d(!0),i(g,null,_(S(F),t=>(d(),i("option",{key:t,value:t},b(t),9,B))),128))],2),[[m,o.value]]),v(r("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.value=t),class:f(["class-select",{"error-border":u.value&&!l.value}]),required:""},[e[5]||(e[5]=r("option",{value:"",disabled:"",selected:""},"Выберите букву",-1)),(d(),i(g,null,_(U,t=>r("option",{key:t,value:t},b(t.toUpperCase()),9,L)),64))],2),[[m,l.value]])]),u.value?(d(),i("div",z," Пожалуйста, выберите и цифру, и букву класса ")):p("",!0)]),e[7]||(e[7]=r("button",{type:"submit"},"Заказать",-1))],32)]))}}),Q=$(A,[["__scopeId","data-v-0e36319a"]]);export{Q as default};
